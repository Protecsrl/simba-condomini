@using Simba.Businness.Models
@model Bacheca

@{
    ViewBag.Title = "Index2";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h2>Comunicazioni Condomino</h2>
<div class="list-container">
    @(Html.DevExtreme().List()
                        .Height("100%")
                        .DataSource(ds => ds.WebApi()
                        .Controller("ComunicazioniDati")
                        .LoadAction("Get")
                        .LoadParams(new { filter =  "[" + (Model!=null ? Model.IdCondominio.ToString() : null) + "]" } ).Key("Oid"))
                        .ItemTemplate(@<text>
                            <div class="product">
                                <div class="tipo"><%- Tipo %></div>
                                <div class="price"><%- Oid %></div>
                                <div><%- Testo %></div>
                                <div class="price">Inserito il <%- FormattedDateInsert %></div>

                                <%if (Type==1){ %>
                                    <a href="/Comunicazioni/NuovoTicket/<%- Oid %>">Dettagli</a>
                                <% } else { %>
                                    <a href="/Comunicazioni/NuovaComunicazione/<%- Oid %>">Dettagli</a>
                                <% } %>
                            </div>
                        </text>)
    )
</div>
<div>
    @Html.DevExtreme().Button().Text("Nuovo").Type(ButtonType.Normal).OnClick("GoToAddTicketCoomunication")
</div>

<script>
    function GoToAddTicketCoomunication(e) {
        var buttonText = e.component.option("text");
        // DevExpress.ui.notify("The " + buttonText + " button was clicked");
        window.location.href = "../Comunicazioni/InsertComunicationTicket";
    }

</script>

